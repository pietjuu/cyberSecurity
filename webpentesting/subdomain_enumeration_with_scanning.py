import subprocess
import os

# Define the target domain
target_domain = input("Enter the target domain like example.com: ")

# Step 1: Use subfinder to find subdomains
subfinder_command = f"subfinder -d {target_domain} -o subdomains.txt"
subprocess.run(subfinder_command, shell=True)

# Step 2: Use dnsx to resolve IP addresses
dnsx_command = f"dnsx -l subdomains.txt -o resolved_ips.txt"
subprocess.run(dnsx_command, shell=True)

# Step 3: Use gobuster to find hidden directories and files
# Adjust the wordlist and other options as needed
gobuster_command = "gobuster dir -u https://{}/ -w /path/to/wordlist.txt -t 50 -x php,html -o gobuster_results.txt"
subprocess.run(gobuster_command.format(target_domain), shell=True)

# Step 4: Use httpx to check the status codes and response headers
httpx_command = "cat resolved_ips.txt | httpx -status-code -title -content-length -o httpx_results.txt"
subprocess.run(httpx_command, shell=True)

# Step 5: Log the results
with open("httpx_results.txt", "r") as httpx_results_file:
    httpx_results = httpx_results_file.read()

with open("gobuster_results.txt", "r") as gobuster_results_file:
    gobuster_results = gobuster_results_file.read()

# You can process and analyze the results further as needed
# For example, check for interesting findings or potential vulnerabilities

# Clean up temporary files
os.remove("subdomains.txt")
os.remove("resolved_ips.txt")
os.remove("gobuster_results.txt")
os.remove("httpx_results.txt")
